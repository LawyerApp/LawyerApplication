$(function () { function e() { !function () { v.empty(); for (var e = 0; e < 7; e++)v.append("<div>" + s[e].substring(0, 3) + "</div>") }(); var e = function () { for (var e = [], a = 1; a < (r = t, o = i, new Date(r, o, 0).getDate() + 1); a++)e.push({ day: a, weekday: s[(n = t, d = i, c = a, new Date(n, d - 1, c).getDay())] }); var n, d, c; var r, o; return e }(), n = 0, d = !1; for (h.empty(); !d;)s[n] == e[0].weekday ? d = !0 : (h.append('<div class="blank"></div>'), n++); for (var l = 0; l < 42 - n; l++)if (l >= e.length) h.append('<div class="blank"></div>'); else if (l % 7 == 6 || l % 7 == 5) { var u = e[l].day, p = a(new Date(t, i - 1, u)) ? '<div class="today">' : "<div class='bcolor'>"; h.append(p + "" + u + "</div>") } else { u = e[l].day, p = a(new Date(t, i - 1, u)) ? '<div class="today">' : "<div>"; h.append(p + "" + u + "</div>") } var y, g = o[i - 1]; f.css("background-color", g).find("h1").text(r[i - 1] + " " + t), v.find("div").css("color", g), h.find(".today").css("background-color", g), (y = $("#calendar").css("width", c + "px")).find("#calendar_weekdays, #calendar_content").css("width", c + "px").find("div").css({ width: c / 7 + "px", height: c / 7 + "px", "line-height": c / 7 + "px" }), y.find("#calendar_header").css({ height: c * (1 / 7) + "px" }).find('i[class^="icon-chevron"]').css("line-height", c * (1 / 7) + "px") } function a(e) { return n(new Date) == n(e) } function n(e) { return e.getFullYear() + "/" + (e.getMonth() + 1) + "/" + e.getDate() } var d, c = 480, t = 2013, i = 9, r = ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"], s = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], o = ["#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8", "#E8E8E8"], l = $("#calendar"), f = l.find("#calendar_header"), v = l.find("#calendar_weekdays"), h = l.find("#calendar_content"); d = new Date, t = d.getFullYear(), i = d.getMonth() + 1, e(), f.find('i[class^="icon-chevron"]').on("click", function () { var a = function (a) { (i = "next" == a ? i + 1 : i - 1) < 1 ? (i = 12, t--) : i > 12 && (i = 1, t++), e() }; -1 != $(this).attr("class").indexOf("left") ? a("previous") : a("next") }) });